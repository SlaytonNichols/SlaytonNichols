import{_ as B}from"./FormLoading.vue_vue_type_script_setup_true_lang.3e89691f.js";import{_ as C}from"./AppBreadcrumb.vue_vue_type_script_setup_true_lang.9dac99d8.js";import{d as w,e as A,q as v,H as I,I as b,o as s,c as o,b as m,a as _,f as j,g as d,F as N,h as P,u as V,l as E,w as F,i as L,t as g,r as R,_ as S}from"./app.e1b86abc.js";import{u as $,A as q}from"./posts.49cd4429.js";import"./home.3d72ecdb.js";const D={class:"min-h-screen"},H={class:"flex"},M={class:"px-5 flex-grow mt-10"},O={class:"flex mb-8 justify-center flex-col align-center"},T={key:0,class:"text-gray-500"},W={key:0,class:"m-4 justify-end"},z=w({__name:"Index",setup(G){var x,y;const f=$(),u=((y=(x=A)==null?void 0:x.value)==null?void 0:y.roles.indexOf("Admin"))>=0,a=v([]),p=v(),n=I({get(){return p.value},set(t){p.value=t}}),h=E();a.value=h.getRoutes().filter(t=>{var e;return t.path.startsWith("/posts/")&&((e=t.meta)==null?void 0:e.frontmatter)}).map(t=>{var e;return{path:t.path,name:t.name,frontmatter:(e=t.meta)==null?void 0:e.frontmatter}}).filter(t=>!t.path.includes("employment-history")).sort((t,e)=>{var r,c,i;return(i=(r=e.frontmatter.date)!=null?r:"")==null?void 0:i.localeCompare((c=t.frontmatter.date)!=null?c:"")});const k=async()=>{h.push({path:"/posts/create"})};return b(async()=>{n.set(!0),await f.refreshPosts(),f.allPosts.forEach(t=>{a.value.push({id:t.id,path:"/posts/"+t.path,title:t.title,draft:t.draft,frontmatter:{title:t.title,summary:t.summary}})}),u||(a.value=a.value.filter(t=>!t.draft)),n.set(!1)}),(t,e)=>{const r=C,c=B,i=R("router-link");return s(),o("div",D,[m("main",H,[m("div",M,[_(r,{class:"my-4 justify-center",name:"Blog"}),n.get()?(s(),j(c,{key:0,class:"justify-center",loading:n,icon:!0,text:""},null,8,["loading"])):d("",!0),(s(!0),o(N,null,P(a.value,l=>(s(),o("div",O,[_(i,{class:"text-2xl hover:text-green-600",to:l.path},{default:F(()=>[L(g(l.frontmatter.title),1)]),_:2},1032,["to"]),l.frontmatter.summary?(s(),o("p",T,g(l.frontmatter.summary),1)):d("",!0)]))),256))]),u?(s(),o("div",W,[m("button",{onClick:k},[_(V(q),{class:"w-8 h-8"})])])):d("",!0)])])}}});const Y=S(z,[["__scopeId","data-v-e290e9f8"]]);export{Y as default};
